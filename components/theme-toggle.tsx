'use client';

import * as React from 'react';
import {useState, useEffect} from 'react';
import {useTheme} from 'next-themes';

import {Button} from '@/components/ui/button';

const LightThemeIcon = () => (
  <svg
    width="12"
    height="12"
    viewBox="0 0 12 12"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      className="icon-fill"
      fill="currentColor"
      fillRule="evenodd"
      clipRule="evenodd"
      d="M6.42737 11.5726V10.2428C6.42737 10.0072 6.2361 9.81542 5.99995 9.81542C5.76379 9.81542 5.57252 10.0072 5.57252 10.2428V11.5726C5.57252 11.8087 5.76379 12 5.99995 12C6.2361 12 6.42737 11.8087 6.42737 11.5726ZM8.69812 9.30249L9.63846 10.2422C9.80516 10.4095 10.076 10.4095 10.2433 10.2422C10.41 10.0756 10.41 9.80469 10.2433 9.638L9.30293 8.6977C9.13623 8.53101 8.86482 8.53101 8.69812 8.6977C8.53142 8.86493 8.53142 9.13526 8.69812 9.30249ZM2.36157 10.2422L3.30191 9.30249C3.46861 9.13526 3.46861 8.86493 3.30191 8.6977C3.1352 8.53101 2.86433 8.53101 2.69763 8.6977L1.7573 9.638C1.59059 9.80469 1.59059 10.0756 1.7573 10.2422C1.924 10.4095 2.19487 10.4095 2.36157 10.2422ZM5.98887 3.02449C4.32458 3.02449 2.97282 4.37616 2.97282 6.04095C2.97282 7.70517 4.32455 9.05631 5.98887 9.05631C7.6537 9.05631 9.00546 7.70518 9.00546 6.04095C9.00546 4.37619 7.65373 3.02449 5.98887 3.02449ZM10.2433 6.42773H11.5726C11.8087 6.42773 12 6.23594 12 6.00033C12 5.76418 11.8087 5.57292 11.5726 5.57292H10.2433C10.0071 5.57292 9.81585 5.76418 9.81585 6.00033C9.81585 6.23594 10.0071 6.42773 10.2433 6.42773ZM0.427425 6.42773H1.75672C1.99288 6.42773 2.18415 6.23594 2.18415 6.00033C2.18415 5.76418 1.99288 5.57292 1.75672 5.57292H0.427425C0.191267 5.57292 0 5.76418 0 6.00033C0 6.23594 0.191267 6.42773 0.427425 6.42773ZM1.75725 2.36198L2.69759 3.30227C2.86429 3.46896 3.13516 3.46896 3.30186 3.30227C3.46857 3.13504 3.46857 2.86471 3.30186 2.69749L2.36153 1.75773C2.19483 1.5905 1.92396 1.5905 1.75725 1.75773C1.59055 1.92442 1.59055 2.19528 1.75725 2.36198ZM9.3029 3.30227L10.2432 2.36198C10.4099 2.19528 10.4099 1.92442 10.2432 1.75773C10.076 1.5905 9.80513 1.5905 9.63843 1.75773L8.6981 2.69749C8.53139 2.86471 8.53139 3.13504 8.6981 3.30227C8.8648 3.46896 9.1362 3.46896 9.3029 3.30227ZM6.42747 1.75718V0.427406C6.42747 0.191792 6.2362 0 6.00004 0C5.76388 0 5.57262 0.191792 5.57262 0.427406V1.75718C5.57262 1.99333 5.76388 2.18458 6.00004 2.18458C6.2362 2.18458 6.42747 1.99333 6.42747 1.75718Z"
    />
  </svg>
);

const DarkThemeIcon = () => (
  <svg
    width="12"
    height="12"
    viewBox="0 0 12 12"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      className="icon-fill"
      fill="currentColor"
      d="M11.9992 6.59459C11.8449 8.11204 11.1195 9.51348 9.97081 10.5164C8.82207 11.5193 7.33552 12.0485 5.81114 11.9965C4.28677 11.9451 2.8396 11.3162 1.76118 10.2378C0.683252 9.15937 0.0548495 7.71177 0.00341931 6.18747C-0.0479854 4.66371 0.481801 3.17673 1.48523 2.02854C2.48816 0.879854 3.89023 0.15553 5.40776 0.00124663C5.5006 -0.00924367 5.58767 0.0474039 5.61705 0.136046C5.6459 0.22469 5.60918 0.321723 5.52788 0.36841C4.34818 1.07179 3.55876 2.28023 3.38929 3.64353C3.21935 5.00616 3.68829 6.37148 4.65973 7.34243C5.63118 8.31383 6.99651 8.78227 8.35989 8.61175C9.72258 8.44181 10.9311 7.65242 11.6341 6.4722C11.6818 6.39352 11.7773 6.35838 11.8644 6.38723C11.9514 6.41608 12.0076 6.50105 11.9992 6.59283L11.9992 6.59459Z"
    />
  </svg>
);

const SystemThemeIcon = () => (
  <svg
    width="12"
    height="12"
    viewBox="0 0 12 12"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      className="icon-fill"
      fill="currentColor"
      d="M6.73625 2.76178C6.86832 2.27979 7.54852 2.27979 7.68059 2.76178L8.47063 5.58795C8.53664 5.76341 8.64649 5.89581 8.82219 5.93951L11.6542 6.72858C12.1153 6.85968 12.1152 7.53891 11.6542 7.67096L8.82219 8.461C8.64654 8.5056 8.51435 8.6362 8.47063 8.81158L7.68059 11.6387C7.54848 12.1205 6.8685 12.1204 6.73625 11.6387L5.94524 8.81158C5.87921 8.63615 5.76939 8.50468 5.59367 8.461L2.76164 7.67096C2.27949 7.5388 2.2794 6.86063 2.76164 6.72858L5.59367 5.93951C5.76948 5.87359 5.9015 5.76346 5.94524 5.58795L6.73625 2.76178ZM2.16789 0.180725C2.23394 -0.0602577 2.57452 -0.0602673 2.64055 0.180725L3.03508 1.59381C3.06805 1.68145 3.12316 1.74767 3.21086 1.76959L4.62688 2.16412C4.85756 2.22962 4.85756 2.56988 4.62688 2.6358L3.21086 3.03033C3.12312 3.05268 3.05692 3.11847 3.03508 3.20612L2.64055 4.6192C2.57451 4.8602 2.23392 4.8602 2.16789 4.6192L1.77238 3.20612C1.73937 3.11836 1.6845 3.05217 1.5966 3.03033L0.180588 2.6358C-0.0602961 2.56965 -0.0603136 2.23025 0.180588 2.16412L1.5966 1.76959C1.68451 1.73663 1.75052 1.68156 1.77238 1.59381L2.16789 0.180725Z"
    />
  </svg>
);

export function ModeToggle() {
  const {theme, setTheme} = useTheme();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  if (!mounted) {
    return null;
  }

  return (
    <div className="theme-toggle-group">
      <Button
        variant="ghost"
        size="icon"
        onMouseDown={() => setTheme('light')}
        className={`theme-toggle ${theme === 'light' ? 'active' : ''}`}
      >
        <LightThemeIcon />
        <span className="sr-only">Light theme</span>
      </Button>
      <Button
        variant="ghost"
        size="icon"
        onMouseDown={() => setTheme('dark')}
        className={`theme-toggle ${theme === 'dark' ? 'active' : ''}`}
      >
        <DarkThemeIcon />
        <span className="sr-only">Dark theme</span>
      </Button>
      <Button
        variant="ghost"
        size="icon"
        onMouseDown={() => setTheme('system')}
        className={`theme-toggle ${theme === 'system' ? 'active' : ''}`}
      >
        <SystemThemeIcon />
        <span className="sr-only">System theme</span>
      </Button>
    </div>
  );
}
